{
  "backgroundColor": "#FFFFFF",
  "borderColor": "#E0DEDE",
  "borderRadius": "{{appsmith.theme.borderRadius.appBorderRadius}}",
  "borderWidth": "1",
  "bottomRow": 79,
  "boxShadow": "{{appsmith.theme.boxShadow.appBoxShadow}}",
  "defaultModel": "{{NetworkData.getCustomerData()}}",
  "dynamicBindingPathList": [
    {
      "key": "theme"
    },
    {
      "key": "borderRadius"
    },
    {
      "key": "boxShadow"
    },
    {
      "key": "defaultModel"
    }
  ],
  "dynamicHeight": "FIXED",
  "dynamicTriggerPathList": [
    {
      "key": "onResetClick"
    }
  ],
  "events": [
    "onResetClick"
  ],
  "isCanvas": false,
  "isLoading": false,
  "isSearchWildcard": true,
  "isVisible": true,
  "key": "y4iizptz7z",
  "leftColumn": 23,
  "maxDynamicHeight": 9000,
  "minDynamicHeight": 4,
  "mobileBottomRow": 38,
  "mobileLeftColumn": 30,
  "mobileRightColumn": 53,
  "mobileTopRow": 8,
  "needsErrorInfo": false,
  "onResetClick": "{{showAlert('Successfully reset!!', '');}}",
  "originalBottomRow": 79,
  "originalTopRow": 8,
  "parentColumnSpace": 18.460205078125,
  "parentId": "yaeuqx8gh2",
  "parentRowSpace": 10,
  "renderMode": "CANVAS",
  "rightColumn": 64,
  "srcDoc": {
    "css": "/* ============================================================================\n   DATA TOPOLOGY V1 - CSS STYLES FOR APPSMITH WIDGET\n   ============================================================================\n\n   This CSS file contains all styling for the dataTopoV1 network topology\n   React Flow diagram, including custom node types and layout.\n\n   Copy this content into the \"CSS\" tab of your Custom Widget Builder.\n\n   ============================================================================ */\n/* ============================================================================\n   SECTION 1: Container Reset & Layout\n   ============================================================================ */\n/* Function 1.1: Reset default styles and ensure full viewport */\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n/* Function 1.2: Root container takes full widget space */\n#root {\n  width: 100%;\n  height: 100%;\n  min-height: 600px;\n  position: relative;\n  overflow: hidden;\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", \"Roboto\", \"Oxygen\", \"Ubuntu\", \"Cantarell\", \"Fira Sans\", \"Droid Sans\", \"Helvetica Neue\", sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n/* ============================================================================\n   SECTION 2: React Flow Specific Overrides\n   ============================================================================ */\n/* Function 2.1: Ensure React Flow container fills space */\n.react-flow {\n  width: 100% !important;\n  height: 100% !important;\n}\n\n/* Function 2.2: Style minimap for better visibility */\n.react-flow__minimap {\n  background-color: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 4px;\n}\n\n/* Function 2.3: Style controls panel */\n.react-flow__controls {\n  background-color: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n/* Function 2.4: Style control buttons */\n.react-flow__controls-button {\n  border-bottom: 1px solid #e5e7eb;\n  background-color: white;\n  transition: background-color 0.2s;\n}\n\n.react-flow__controls-button:hover {\n  background-color: #f3f4f6;\n}\n\n.react-flow__controls-button:last-child {\n  border-bottom: none;\n}\n\n/* ============================================================================\n   SECTION 3: Custom Node Types - Standard Node\n   ============================================================================ */\n/* Function 3.1: Custom node base styling */\n.custom-node {\n  padding: 10px 20px;\n  border-radius: 5px;\n  border: 2px solid #1a192b;\n  min-width: 100px;\n  min-height: 50px;\n  width: 100%;\n  height: 100%;\n  text-align: center;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #ffffff;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  transition: box-shadow 0.2s;\n}\n\n.custom-node:hover {\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n}\n\n.custom-node-content {\n  font-size: 14px;\n  color: #222;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  word-wrap: break-word;\n  padding: 5px;\n}\n\n/* Function 3.2: Node selection highlighting */\n.react-flow__node.selected .custom-node {\n  box-shadow: 0 0 0 3px #3b82f6;\n}\n\n/* ============================================================================\n   SECTION 4: Custom Node Types - Group Node\n   ============================================================================ */\n/* Function 4.1: Custom group node for containers */\n.custom-group-node {\n  width: 100%;\n  height: 100%;\n  background: rgba(240, 240, 255, 0.25);\n  border: 2px dashed #4299e1;\n  border-radius: 8px;\n  position: relative;\n  padding: 10px;\n  pointer-events: none;\n}\n\n.custom-group-node-label {\n  position: absolute;\n  top: 5px;\n  left: 10px;\n  font-size: 14px;\n  font-weight: 600;\n  color: #2d3748;\n  background: rgba(255, 255, 255, 0.9);\n  padding: 4px 8px;\n  border-radius: 4px;\n  border: 1px solid #cbd5e0;\n  z-index: 10;\n  pointer-events: all;\n}\n\n/* ============================================================================\n   SECTION 5: Custom Node Types - Text Node\n   ============================================================================ */\n/* Function 5.1: Custom text node for annotations */\n.custom-text-node {\n  padding: 12px;\n  border-radius: 4px;\n  border: 1px solid #cbd5e0;\n  min-width: 150px;\n  min-height: 100px;\n  width: 100%;\n  height: 100%;\n  position: relative;\n  display: flex;\n  align-items: flex-start;\n  justify-content: flex-start;\n  background: #fffef0;\n}\n\n.custom-text-node-content {\n  font-size: 13px;\n  color: #222;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  overflow-wrap: break-word;\n  padding: 5px;\n  width: 100%;\n  height: 100%;\n  overflow-y: auto;\n  line-height: 1.5;\n  text-align: left;\n}\n\n/* ============================================================================\n   SECTION 6: Handle (Connection Point) Styling\n   ============================================================================ */\n/* Function 6.1: Base handle styling for all nodes */\n.react-flow__handle {\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background: #555;\n  border: 2px solid white;\n  transition: all 0.2s;\n}\n\n.custom-node .react-flow__handle,\n.custom-group-node .react-flow__handle,\n.custom-text-node .react-flow__handle {\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  border: 2px solid white;\n}\n\n.custom-node .react-flow__handle {\n  background: #555;\n}\n\n.custom-group-node .react-flow__handle {\n  background: #4299e1;\n  pointer-events: all;\n}\n\n.custom-text-node .react-flow__handle {\n  background: #555;\n}\n\n/* Function 6.2: Handle position adjustments */\n.react-flow__handle-top {\n  top: -6px;\n}\n\n.react-flow__handle-bottom {\n  bottom: -6px;\n}\n\n.react-flow__handle-left {\n  left: -6px;\n}\n\n.react-flow__handle-right {\n  right: -6px;\n}\n\n/* Function 6.3: Handle hover state */\n.react-flow__handle:hover {\n  background-color: #3b82f6;\n  transform: scale(1.2);\n}\n\n/* Function 6.4: Handle connection state */\n.react-flow__handle-connecting {\n  background-color: #10b981;\n}\n\n/* Function 6.5: Valid connection target */\n.react-flow__handle-valid {\n  background-color: #10b981;\n}\n\n/* ============================================================================\n   SECTION 7: Edge (Connection) Styling\n   ============================================================================ */\n/* Function 7.1: Edge label styling */\n.react-flow__edge-text {\n  font-size: 11px;\n  font-weight: 600;\n  fill: #374151;\n}\n\n/* Function 7.1b: Edge label foreignObject styling for HTML labels */\n.react-flow__edge foreignObject {\n  overflow: visible;\n}\n\n.react-flow__edge foreignObject > div {\n  transform: translate(-50%, -50%);\n}\n\n/* Function 7.1c: Edge label background */\n.react-flow__edge-textbg {\n  fill: rgba(255, 255, 255, 0.9);\n  rx: 4;\n  ry: 4;\n}\n\n/* Function 7.2: Connection line preview */\n.react-flow__connection-path {\n  stroke: #6366f1;\n  stroke-width: 2;\n}\n\n/* Function 7.3: Selected edge highlighting */\n.react-flow__edge.selected .react-flow__edge-path {\n  stroke: #3b82f6;\n  stroke-width: 3;\n}\n\n/* ============================================================================\n   SECTION 8: Background & Grid\n   ============================================================================ */\n/* Function 8.1: Background pattern styling */\n.react-flow__background {\n  background-color: #ffffff;\n}\n\n/* Function 8.2: Grid dot styling */\n.react-flow__background-pattern {\n  fill: #e5e7eb;\n}\n\n/* ============================================================================\n   SECTION 9: Node Resizer Styling\n   ============================================================================ */\n/* Function 9.1: Custom node resizer */\n.custom-node-resizer-line {\n  border-color: #4299e1 !important;\n  border-width: 2px !important;\n}\n\n.custom-node-resizer-handle {\n  width: 10px !important;\n  height: 10px !important;\n  border-radius: 2px !important;\n  background-color: #4299e1 !important;\n}\n\n/* Function 9.2: Group node resizer */\n.custom-group-resizer-line {\n  border-color: #3182ce !important;\n  border-width: 2px !important;\n  border-style: solid !important;\n  pointer-events: all !important;\n}\n\n.custom-group-resizer-handle {\n  width: 12px !important;\n  height: 12px !important;\n  border-radius: 2px !important;\n  background-color: #3182ce !important;\n  pointer-events: all !important;\n}\n\n.custom-group-node .react-flow__resize-control {\n  pointer-events: all !important;\n}\n\n/* Function 9.3: Text node resizer */\n.custom-text-node-resizer-line {\n  border-color: #4299e1 !important;\n  border-width: 2px !important;\n}\n\n.custom-text-node-resizer-handle {\n  width: 10px !important;\n  height: 10px !important;\n  border-radius: 2px !important;\n  background-color: #4299e1 !important;\n}\n\n/* ============================================================================\n   SECTION 10: Loading & Error States\n   ============================================================================ */\n/* Function 10.1: Loading indicator */\n.topology-loading {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", sans-serif;\n  color: #6b7280;\n  font-size: 14px;\n}\n\n/* Function 10.2: Error message styling */\n.topology-error {\n  padding: 20px;\n  color: #ef4444;\n  font-family: monospace;\n  background-color: #fef2f2;\n  border: 1px solid #fecaca;\n  border-radius: 6px;\n  margin: 20px;\n  font-size: 13px;\n}\n\n.topology-error h3 {\n  margin-bottom: 10px;\n  color: #dc2626;\n}\n\n.topology-error pre {\n  background: #f5f5f5;\n  padding: 10px;\n  overflow: auto;\n  border-radius: 4px;\n  font-size: 11px;\n}\n\n/* ============================================================================\n   SECTION 11: Utility Classes\n   ============================================================================ */\n/* Function 11.1: Text utilities */\n.text-center {\n  text-align: center;\n}\n\n.text-left {\n  text-align: left;\n}\n\n.pre-line {\n  white-space: pre-line;\n}\n\n/* Function 11.2: Spacing utilities */\n.p-20 {\n  padding: 20px;\n}\n\n.m-20 {\n  margin: 20px;\n}",
    "html": "<!-- ============================================================================\n     DATA TOPOLOGY V1 - HTML COMPONENT FOR APPSMITH\n     ============================================================================\n\n     This is the HTML section of the Appsmith Custom Widget for the\n     dataTopoV1 network topology diagram.\n\n     Copy this content into the \"HTML\" tab of your Custom Widget Builder.\n\n     Components:\n     1. Root container for React rendering\n     2. Import map for ESM module resolution\n     3. React Flow CSS stylesheet\n\n     ============================================================================\n-->\n\n<!-- Root Container -->\n<div id=\"root\" style=\"width: 100%; height: 800px;\"></div>\n\n<!-- React Flow CSS -->\n<link\n  href=\"https://cdn.jsdelivr.net/npm/reactflow@11.11.4/dist/style.min.css\"\n  rel=\"stylesheet\"\n/>\n",
    "js": "/* ============================================================================\n * DATA TOPOLOGY V1 - APPSMITH CUSTOM WIDGET JAVASCRIPT\n * ============================================================================\n *\n * Project: Network Topology Visualization with React Flow\n * Template: dataTopoV1 (Auto-generated flow)\n * Created: November 2025\n *\n * Purpose: Interactive network topology diagram using React Flow with\n * custom node types (CustomNode, CustomGroupNode, CustomTextNode)\n *\n * Appsmith Integration:\n * - Uses appsmith.onReady() for initialization\n * - Supports dynamic data updates via appsmith.model\n * - ESM module imports for React and React Flow\n *\n * Copy this content into the \"JS\" tab of your Custom Widget Builder.\n *\n * ============================================================================\n */\n\n/* ========================================================================\n * APPSMITH INITIALIZATION\n * ========================================================================\n */\n\nappsmith.onReady(() => {\n  console.log(\"=== DataTopoV1 Network Topology Initializing ===\");\n\n  // Main initialization function\n  initializeNetworkTopology();\n});\n\n/* ========================================================================\n * MAIN INITIALIZATION FUNCTION\n * ========================================================================\n */\n\nasync function initializeNetworkTopology() {\n  try {\n    /* STEP 1: Import React Libraries - Share same instance globally */\n    if (!window.React) {\n      window.React = await import(\"https://esm.sh/react@18.3.1\");\n    }\n    if (!window.ReactDOM) {\n      window.ReactDOM = await import(\"https://esm.sh/react-dom@18.3.1\");\n    }\n    const React = window.React;\n    const ReactDOMClient = await import(\"https://esm.sh/react-dom@18.3.1/client\");\n\n    // Import ReactFlow with pinned React version\n    const ReactFlowModule = await import(\"https://esm.sh/reactflow@11.11.4?deps=react@18.3.1,react-dom@18.3.1&bundle\");\n    const {\n      default: ReactFlow,\n      Controls,\n      Background,\n      MiniMap,\n      Handle,\n      Position,\n      NodeResizer,\n      ReactFlowProvider,\n      getBezierPath,\n      EdgeLabelRenderer,\n      BaseEdge\n    } = ReactFlowModule;\n    console.log(\"‚úì React and React Flow modules loaded\");\n    console.log(\"ReactFlowProvider available:\", typeof ReactFlowProvider);\n\n    /* ====================================================================\n     * CUSTOM EDGE COMPONENT\n     * ====================================================================\n     */\n\n    /* COMPONENT: CarrierConnectionEdge - Edge for carrier connections with comma-based wrapping */\n    const CarrierConnectionEdge = ({\n      id,\n      sourceX,\n      sourceY,\n      targetX,\n      targetY,\n      sourcePosition,\n      targetPosition,\n      style = {},\n      data\n    }) => {\n      const [edgePath, labelX, labelY] = getBezierPath({\n        sourceX,\n        sourceY,\n        sourcePosition,\n        targetX,\n        targetY,\n        targetPosition\n      });\n\n      // Helper function to wrap text only at commas with max width\n      const wrapAtCommas = (text, maxWidth = 200) => {\n        if (!text) return [];\n        const items = text.split(\",\").map(item => item.trim());\n        const lines = [];\n        let currentLine = \"\";\n        items.forEach((item, index) => {\n          const isLast = index === items.length - 1;\n          const itemWithComma = isLast ? item : item + \",\";\n\n          // Estimate character width (roughly 6-7px per char at 11px font)\n          const estimatedWidth = (currentLine + \" \" + itemWithComma).length * 7;\n          if (currentLine === \"\") {\n            currentLine = itemWithComma;\n          } else if (estimatedWidth <= maxWidth) {\n            currentLine += \" \" + itemWithComma;\n          } else {\n            lines.push(currentLine);\n            currentLine = itemWithComma;\n          }\n        });\n        if (currentLine) lines.push(currentLine);\n        return lines;\n      };\n      const labelLines = data?.label ? wrapAtCommas(data.label, data.maxWidth || 200) : [];\n      return React.createElement(React.Fragment, null, React.createElement(BaseEdge, {\n        path: edgePath,\n        style: style\n      }), labelLines.length > 0 && React.createElement(EdgeLabelRenderer, null, React.createElement(\"div\", {\n        style: {\n          position: \"absolute\",\n          transform: `translate(-50%, -50%) translate(${labelX}px,${labelY}px)`,\n          background: \"rgba(255, 255, 255, 0.95)\",\n          padding: \"6px 10px\",\n          borderRadius: \"4px\",\n          fontSize: \"11px\",\n          border: \"1px solid #e5e7eb\",\n          lineHeight: \"1.5\",\n          whiteSpace: \"nowrap\",\n          textAlign: \"left\",\n          boxShadow: \"0 1px 3px rgba(0,0,0,0.1)\",\n          fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", sans-serif',\n          pointerEvents: \"all\",\n          maxWidth: `${data.maxWidth || 200}px`\n        },\n        className: \"nodrag nopan\"\n      }, labelLines.map((line, idx) => React.createElement(\"div\", {\n        key: idx\n      }, line)))));\n    };\n\n    /* COMPONENT: CustomEdge - Edge with multi-line label */\n    const CustomEdge = ({\n      id,\n      sourceX,\n      sourceY,\n      targetX,\n      targetY,\n      sourcePosition,\n      targetPosition,\n      style = {},\n      data\n    }) => {\n      const [edgePath, labelX, labelY] = getBezierPath({\n        sourceX,\n        sourceY,\n        sourcePosition,\n        targetX,\n        targetY,\n        targetPosition\n      });\n\n      // Helper function to wrap text at max character length\n      const wrapText = (text, maxLength = 60) => {\n        if (!text || text.length <= maxLength) return [text];\n        const lines = [];\n        let currentLine = \"\";\n        const words = text.split(\" \");\n        for (const word of words) {\n          if ((currentLine + \" \" + word).trim().length <= maxLength) {\n            currentLine = currentLine ? currentLine + \" \" + word : word;\n          } else {\n            if (currentLine) lines.push(currentLine);\n            currentLine = word;\n          }\n        }\n        if (currentLine) lines.push(currentLine);\n        return lines;\n      };\n\n      // Wrap each line if needed\n      const line1Parts = data?.label?.line1 ? wrapText(data.label.line1) : [];\n      const line2Parts = data?.label?.line2 ? wrapText(data.label.line2) : [];\n      const line3Parts = data?.label?.line3 ? wrapText(data.label.line3) : [];\n      return React.createElement(React.Fragment, null, React.createElement(BaseEdge, {\n        path: edgePath,\n        style: style\n      }), data && data.label && React.createElement(EdgeLabelRenderer, null, React.createElement(\"div\", {\n        style: {\n          position: \"absolute\",\n          transform: `translate(-50%, -50%) translate(${labelX}px,${labelY}px)`,\n          background: \"rgba(255, 255, 255, 0.95)\",\n          padding: \"6px 10px\",\n          borderRadius: \"4px\",\n          fontSize: \"11px\",\n          border: \"1px solid #e5e7eb\",\n          lineHeight: \"1.5\",\n          whiteSpace: \"pre-wrap\",\n          textAlign: \"left\",\n          boxShadow: \"0 1px 3px rgba(0,0,0,0.1)\",\n          fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", sans-serif',\n          pointerEvents: \"all\",\n          maxWidth: \"300px\"\n        },\n        className: \"nodrag nopan\"\n      }, line1Parts.map((part, idx) => React.createElement(\"div\", {\n        key: `line1-${idx}`\n      }, part)), line2Parts.map((part, idx) => React.createElement(\"div\", {\n        key: `line2-${idx}`\n      }, part)), line3Parts.map((part, idx) => React.createElement(\"div\", {\n        key: `line3-${idx}`\n      }, part)))));\n    };\n\n    /* ====================================================================\n     * CUSTOM NODE COMPONENTS\n     * ====================================================================\n     */\n\n    /* COMPONENT 1: CustomNode - Standard resizable node with handles */\n    const CustomNode = ({\n      data,\n      isConnectable,\n      selected\n    }) => {\n      const labelText = String(data?.label || \"\");\n\n      // Split label by newlines and create separate divs for each line\n      const labelLines = labelText.split(\"\\n\").map((line, index) => React.createElement(\"div\", {\n        key: index\n      }, line));\n      return React.createElement(\"div\", {\n        className: \"custom-node\"\n      }, React.createElement(NodeResizer, {\n        minWidth: 100,\n        minHeight: 50,\n        isVisible: selected\n      }), React.createElement(Handle, {\n        type: \"target\",\n        position: Position.Top,\n        id: \"top\",\n        isConnectable\n      }), React.createElement(Handle, {\n        type: \"target\",\n        position: Position.Left,\n        id: \"left\",\n        isConnectable\n      }), React.createElement(Handle, {\n        type: \"target\",\n        position: Position.Right,\n        id: \"right\",\n        isConnectable\n      }), React.createElement(Handle, {\n        type: \"target\",\n        position: Position.Bottom,\n        id: \"bottom\",\n        isConnectable\n      }), React.createElement(\"div\", {\n        className: \"custom-node-content\"\n      }, ...labelLines), React.createElement(Handle, {\n        type: \"source\",\n        position: Position.Top,\n        id: \"top-source\",\n        isConnectable\n      }), React.createElement(Handle, {\n        type: \"source\",\n        position: Position.Left,\n        id: \"left-source\",\n        isConnectable\n      }), React.createElement(Handle, {\n        type: \"source\",\n        position: Position.Right,\n        id: \"right-source\",\n        isConnectable\n      }), React.createElement(Handle, {\n        type: \"source\",\n        position: Position.Bottom,\n        id: \"bottom-source\",\n        isConnectable\n      }));\n    };\n\n    /* COMPONENT 2: CustomGroupNode - Group/container node */\n    const CustomGroupNode = ({\n      data,\n      isConnectable,\n      selected\n    }) => {\n      const labelText = String(data?.label || \"\");\n      return React.createElement(\"div\", {\n        className: \"custom-group-node\"\n      }, React.createElement(NodeResizer, {\n        minWidth: 200,\n        minHeight: 150,\n        isVisible: selected\n      }), React.createElement(Handle, {\n        type: \"target\",\n        position: Position.Top,\n        id: \"top\",\n        isConnectable\n      }), React.createElement(Handle, {\n        type: \"target\",\n        position: Position.Left,\n        id: \"left\",\n        isConnectable\n      }), React.createElement(Handle, {\n        type: \"target\",\n        position: Position.Right,\n        id: \"right\",\n        isConnectable\n      }), React.createElement(Handle, {\n        type: \"target\",\n        position: Position.Bottom,\n        id: \"bottom\",\n        isConnectable\n      }), React.createElement(\"div\", {\n        className: \"custom-group-node-label\"\n      }, labelText), React.createElement(Handle, {\n        type: \"source\",\n        position: Position.Top,\n        id: \"top-source\",\n        isConnectable\n      }), React.createElement(Handle, {\n        type: \"source\",\n        position: Position.Left,\n        id: \"left-source\",\n        isConnectable\n      }), React.createElement(Handle, {\n        type: \"source\",\n        position: Position.Right,\n        id: \"right-source\",\n        isConnectable\n      }), React.createElement(Handle, {\n        type: \"source\",\n        position: Position.Bottom,\n        id: \"bottom-source\",\n        isConnectable\n      }));\n    };\n\n    /* COMPONENT 3: CustomTextNode - Text/annotation node */\n    const CustomTextNode = ({\n      data,\n      isConnectable,\n      selected\n    }) => {\n      const labelText = String(data?.label || \"\");\n      return React.createElement(\"div\", {\n        className: \"custom-text-node\"\n      }, React.createElement(NodeResizer, {\n        minWidth: 150,\n        minHeight: 100,\n        isVisible: selected\n      }), React.createElement(Handle, {\n        type: \"target\",\n        position: Position.Top,\n        id: \"top\",\n        isConnectable\n      }), React.createElement(Handle, {\n        type: \"target\",\n        position: Position.Left,\n        id: \"left\",\n        isConnectable\n      }), React.createElement(Handle, {\n        type: \"target\",\n        position: Position.Right,\n        id: \"right\",\n        isConnectable\n      }), React.createElement(Handle, {\n        type: \"target\",\n        position: Position.Bottom,\n        id: \"bottom\",\n        isConnectable\n      }), React.createElement(\"div\", {\n        className: \"custom-text-node-content\"\n      }, labelText), React.createElement(Handle, {\n        type: \"source\",\n        position: Position.Top,\n        id: \"top-source\",\n        isConnectable\n      }), React.createElement(Handle, {\n        type: \"source\",\n        position: Position.Left,\n        id: \"left-source\",\n        isConnectable\n      }), React.createElement(Handle, {\n        type: \"source\",\n        position: Position.Right,\n        id: \"right-source\",\n        isConnectable\n      }), React.createElement(Handle, {\n        type: \"source\",\n        position: Position.Bottom,\n        id: \"bottom-source\",\n        isConnectable\n      }));\n    };\n\n    /* ====================================================================\n     * NETWORK TOPOLOGY DATA - dataTopoV1\n     * ====================================================================\n     */\n\n    /* HELPER: Enhance DataCentre Nodes with SIP Interface IPs */\n    function enhanceDataCentreNodes(baseNodes) {\n      // Get customer data from appsmith model or use empty array\n      const customerData = typeof appsmith !== \"undefined\" && appsmith.model?.customerData ? appsmith.model.customerData : [];\n\n      // Map data_source to node IDs\n      const dataSourceToNodeId = {\n        SYD1A: \"19\",\n        SYD2A: \"21\",\n        SEMA: \"20\"\n      };\n\n      // Collect SIP interface IPs by data source\n      const sipInterfacesByNode = {};\n      customerData.forEach(customer => {\n        if (customer.data_source && customer.sip_interface_ips) {\n          const nodeId = dataSourceToNodeId[customer.data_source];\n          if (nodeId) {\n            if (!sipInterfacesByNode[nodeId]) {\n              sipInterfacesByNode[nodeId] = new Set();\n            }\n            // Add IPs to the set (automatically deduplicates)\n            const ips = customer.sip_interface_ips.split(\",\").map(ip => ip.trim());\n            ips.forEach(ip => sipInterfacesByNode[nodeId].add(ip));\n          }\n        }\n      });\n\n      // Update node labels with SIP interface IPs\n      return baseNodes.map(node => {\n        if (sipInterfacesByNode[node.id]) {\n          const ips = Array.from(sipInterfacesByNode[node.id]).join(\", \");\n          const originalLabel = node.data.label;\n          return {\n            ...node,\n            data: {\n              ...node.data,\n              label: `${originalLabel}\\nSIP Interfaces: ${ips}`\n            }\n          };\n        }\n        return node;\n      });\n    }\n\n    /* HELPER: Generate Gen1 Customer Nodes from appsmith data */\n    function generateGen1CustomerNodes() {\n      const customerNodes = [];\n\n      // Get customer data from appsmith model or use empty array\n      const customerData = typeof appsmith !== \"undefined\" && appsmith.model?.customerData ? appsmith.model.customerData : [];\n      console.log(\"=== Gen1 Customer Data ===\");\n      console.log(\"Total records:\", customerData.length);\n      console.log(\"Sample record:\", customerData[0]);\n\n      // Filter for Gen1 customers (those with data_source field)\n      const gen1Customers = customerData.filter(c => c.data_source && c.account_no);\n      console.log(\"Gen1 records found:\", gen1Customers.length);\n      if (gen1Customers.length === 0) {\n        console.log(\"No Gen1 customers to display\");\n        return customerNodes;\n      }\n\n      // Group by account number to avoid duplicates\n      // Since the dropdown filters to one account, this will typically be one customer\n      const uniqueCustomers = {};\n      gen1Customers.forEach(customer => {\n        if (!uniqueCustomers[customer.account_no]) {\n          uniqueCustomers[customer.account_no] = customer;\n        }\n      });\n      console.log(\"Unique Gen1 customers:\", Object.keys(uniqueCustomers).length);\n\n      // Create nodes for each unique Gen1 customer\n      let yOffset = 250; // Start 150px lower (was 100, now 250)\n      Object.values(uniqueCustomers).forEach((customer, index) => {\n        const nodeId = `gen1-customer-${customer.account_no}`;\n\n        // Log what we're creating\n        console.log(`Creating node for: ${customer.customer} (${customer.account_no})`);\n        customerNodes.push({\n          id: nodeId,\n          type: \"custom\",\n          data: {\n            label: `${customer.customer}\\nAccount: ${customer.account_no}`\n          },\n          position: {\n            x: 1000,\n            // Move 100px to the right (was 900, now 1000)\n            y: yOffset + index * 120\n          },\n          style: {\n            width: 250,\n            height: 80,\n            backgroundColor: \"#e0f2fe\"\n          }\n        });\n      });\n      console.log(\"Customer nodes created:\", customerNodes.length);\n      return customerNodes;\n    }\n\n    /* HELPER: Generate edges for Gen1 Carriage to Data Centers */\n    function generateGen1CarriageEdges() {\n      const carriageEdges = [];\n\n      // Get customer data from appsmith model or use empty array\n      const customerData = typeof appsmith !== \"undefined\" && appsmith.model?.customerData ? appsmith.model.customerData : [];\n\n      // Map data_source to node IDs\n      const dataSourceToNodeId = {\n        SYD1A: \"19\",\n        SYD2A: \"21\",\n        SEMA: \"20\"\n      };\n\n      // Collect carrier connections by data source\n      const carriersByDataSource = {};\n      customerData.forEach(customer => {\n        if (customer.data_source && customer.carrier_connections) {\n          const dataSource = customer.data_source;\n          if (!carriersByDataSource[dataSource]) {\n            carriersByDataSource[dataSource] = new Set();\n          }\n          // Split carrier connections and add to set\n          const carriers = customer.carrier_connections.split(\",\").map(c => c.trim());\n          carriers.forEach(carrier => {\n            if (carrier) carriersByDataSource[dataSource].add(carrier);\n          });\n        }\n      });\n\n      // Create edges from Gen1 Carriage to data centers\n      Object.keys(carriersByDataSource).forEach(dataSource => {\n        const dataNodeId = dataSourceToNodeId[dataSource];\n        if (dataNodeId) {\n          const carriers = Array.from(carriersByDataSource[dataSource]).join(\", \");\n          carriageEdges.push({\n            id: `reactflow__edge-1right-source-${dataNodeId}left`,\n            source: \"1\",\n            // Gen1 Carriage node\n            target: dataNodeId,\n            sourceHandle: \"right-source\",\n            targetHandle: \"left\",\n            type: \"carrierConnection\",\n            style: {\n              strokeWidth: 1.5,\n              stroke: \"#10b981\"\n            },\n            data: {\n              label: carriers,\n              maxWidth: 200\n            }\n          });\n        }\n      });\n      console.log(\"Gen1 Carriage edges created:\", carriageEdges.length);\n      return carriageEdges;\n    }\n\n    /* HELPER: Generate edges for Gen1 Customers to Data Centers */\n    function generateGen1CustomerEdges() {\n      const customerEdges = [];\n\n      // Get customer data from appsmith model or use empty array\n      const customerData = typeof appsmith !== \"undefined\" && appsmith.model?.customerData ? appsmith.model.customerData : [];\n\n      // Filter for Gen1 customers (those with data_source field)\n      const gen1Customers = customerData.filter(c => c.data_source && c.account_no);\n\n      // Map data_source values to node IDs\n      const dataSourceToNodeId = {\n        SYD1A: \"19\",\n        // SYD1 node\n        SYD2A: \"21\",\n        // SYD2 node\n        SEMA: \"20\" // SEMA node\n      };\n\n      // Group by account number and data source to collect connection details\n      const customerConnections = {};\n      gen1Customers.forEach(customer => {\n        const accountNo = customer.account_no;\n        const dataSource = customer.data_source;\n        if (!dataSource || !dataSourceToNodeId[dataSource]) return;\n        const connectionKey = `${accountNo}-${dataSource}`;\n        if (!customerConnections[connectionKey]) {\n          customerConnections[connectionKey] = {\n            accountNo: accountNo,\n            dataSource: dataSource,\n            sourceRealm: customer.source_realm || \"N/A\",\n            sessionAgents: customer.customer_realm_session_agents || \"N/A\",\n            genesysDomains: customer.genesys_purecloud_domains || \"\" // Blank instead of N/A\n          };\n        }\n      });\n\n      // Create edges from data centers to customer nodes\n      Object.values(customerConnections).forEach(connection => {\n        const customerNodeId = `gen1-customer-${connection.accountNo}`;\n        const dataNodeId = dataSourceToNodeId[connection.dataSource];\n        if (dataNodeId) {\n          // Check if all data is N/A or empty - skip edge if so\n          const hasValidData = connection.sourceRealm !== \"N/A\" || connection.sessionAgents !== \"N/A\" || connection.genesysDomains && connection.genesysDomains !== \"\";\n          if (!hasValidData) {\n            console.log(`Skipping edge for ${connection.accountNo} - ${connection.dataSource}: all data is N/A or empty`);\n            return; // Skip this edge\n          }\n\n          // Build label lines\n          const labelLines = {\n            line1: `source_realm: ${connection.sourceRealm}`,\n            line2: `Session Agents: ${connection.sessionAgents}`,\n            line3: \"\" // Will be set below if there's a Genesys domain\n          };\n\n          // Add Genesys domain on separate line if it exists\n          if (connection.genesysDomains && connection.genesysDomains.trim() !== \"\") {\n            labelLines.line3 = connection.genesysDomains;\n          }\n\n          // Create edge with custom data for multi-line label\n          customerEdges.push({\n            id: `reactflow__edge-${dataNodeId}right-source-${customerNodeId}left`,\n            source: dataNodeId,\n            target: customerNodeId,\n            sourceHandle: \"right-source\",\n            targetHandle: \"left\",\n            type: \"custom\",\n            style: {\n              strokeWidth: 1.5,\n              stroke: \"#f97316\"\n            },\n            data: {\n              label: labelLines\n            }\n          });\n        }\n      });\n      console.log(\"Customer edges created:\", customerEdges.length);\n      return customerEdges;\n    }\n\n    /* DATA: Initial nodes from dataTopoV1 export */\n    const baseNodes = [{\n      id: \"1\",\n      type: \"custom\",\n      data: {\n        label: \"Gen1 Carriage\"\n      },\n      position: {\n        x: -92.23607459514959,\n        y: 254.45662088626688\n      },\n      style: {\n        width: 150,\n        height: 60,\n        backgroundColor: \"#ffffff\"\n      }\n    }, {\n      id: \"2\",\n      type: \"custom\",\n      data: {\n        label: \"IVP Carriage\"\n      },\n      position: {\n        x: -26.585126130654658,\n        y: -163.33815637366678\n      },\n      style: {\n        width: 150,\n        height: 60,\n        backgroundColor: \"#ffffff\"\n      }\n    }, {\n      id: \"group-9\",\n      type: \"customGroup\",\n      data: {\n        label: \"IVP Cloud\"\n      },\n      position: {\n        x: 290.0499501427992,\n        y: -259.72884777726097\n      },\n      style: {\n        width: 255,\n        height: 239\n      }\n    }, {\n      id: \"13\",\n      type: \"custom\",\n      data: {\n        label: \"AU1\"\n      },\n      position: {\n        x: 15.433429384550266,\n        y: 52.558069192486755\n      },\n      parentNode: \"group-9\",\n      extent: \"parent\",\n      style: {\n        width: 217,\n        height: 62,\n        backgroundColor: \"#ffffff\"\n      }\n    }, {\n      id: \"14\",\n      type: \"custom\",\n      data: {\n        label: \"AU2\"\n      },\n      position: {\n        x: 14.291786730687818,\n        y: 147.31440946306867\n      },\n      parentNode: \"group-9\",\n      extent: \"parent\",\n      style: {\n        width: 220,\n        height: 60,\n        backgroundColor: \"#ffffff\"\n      }\n    }, {\n      id: \"group-18\",\n      type: \"customGroup\",\n      data: {\n        label: \"DataCentres\"\n      },\n      position: {\n        x: 292.71345699905817,\n        y: 103.65544196480488\n      },\n      style: {\n        width: 247,\n        height: 346\n      }\n    }, {\n      id: \"19\",\n      type: \"custom\",\n      data: {\n        label: \"SYD1\"\n      },\n      position: {\n        x: 24.16259636112767,\n        y: 48.32519272225525\n      },\n      parentNode: \"group-18\",\n      extent: \"parent\",\n      style: {\n        width: 204,\n        height: 50,\n        backgroundColor: \"#ffffff\"\n      }\n    }, {\n      id: \"20\",\n      type: \"custom\",\n      data: {\n        label: \"SEMA\"\n      },\n      position: {\n        x: 76.24149643709859,\n        y: 159.51681709290574\n      },\n      parentNode: \"group-18\",\n      extent: \"parent\",\n      style: {\n        width: 100,\n        height: 50,\n        backgroundColor: \"#ffffff\"\n      }\n    }, {\n      id: \"21\",\n      type: \"custom\",\n      data: {\n        label: \"SYD2\"\n      },\n      position: {\n        x: 24.6304399893541,\n        y: 271.2658757959249\n      },\n      parentNode: \"group-18\",\n      extent: \"parent\",\n      style: {\n        width: 202,\n        height: 50,\n        backgroundColor: \"#ffffff\"\n      }\n    }, {\n      id: \"text-22\",\n      type: \"customText\",\n      data: {\n        label: \"Local Policy SYD1 (AccountNo)\\n... MARKDOWN OR HTML TABLE ...\"\n      },\n      position: {\n        x: 205.94479273208458,\n        y: 464.85861934738887\n      },\n      style: {\n        width: 424,\n        height: 186,\n        backgroundColor: \"#fffef0\"\n      }\n    }, {\n      id: \"text-23\",\n      type: \"customText\",\n      data: {\n        label: \"IVP CUSTOMER PHONE #s\\n... MARKDOWN OR HTML TABLE ...\"\n      },\n      position: {\n        x: 677.6692600005458,\n        y: -376.1925420306952\n      },\n      style: {\n        width: 228,\n        height: 161,\n        backgroundColor: \"#fffef0\"\n      }\n    }, {\n      id: \"text-24\",\n      type: \"customText\",\n      data: {\n        label: \"CUSTOMER NAME: \\n- Account #\\n- IVP External ID\\n- Billable Items\\n\\n... MARKDOWN or HTML Table of IVP Config ...\"\n      },\n      position: {\n        x: -183.64857635090289,\n        y: -61.19055599704859\n      },\n      style: {\n        width: 311,\n        height: 251,\n        backgroundColor: \"#fffef0\"\n      }\n    }];\n\n    // Enhance datacenter nodes with SIP interface IPs\n    const enhancedBaseNodes = enhanceDataCentreNodes(baseNodes);\n\n    // Combine enhanced base nodes with generated customer nodes\n    const gen1CustomerNodes = generateGen1CustomerNodes();\n    const initialNodes = [...enhancedBaseNodes, ...gen1CustomerNodes];\n    console.log(\"Total nodes:\", initialNodes.length, \"(Base:\", baseNodes.length, \"+ Gen1 Customers:\", gen1CustomerNodes.length, \")\");\n\n    /* DATA: Initial edges from dataTopoV1 export */\n    const baseEdges = [{\n      id: \"reactflow__edge-19left-source-20left\",\n      source: \"19\",\n      target: \"20\",\n      sourceHandle: \"left-source\",\n      targetHandle: \"left\",\n      style: {\n        stroke: \"#ef4444\",\n        strokeDasharray: \"5,5\"\n      },\n      label: \"Dirty\"\n    }, {\n      id: \"reactflow__edge-21left-source-20left\",\n      source: \"21\",\n      target: \"20\",\n      sourceHandle: \"left-source\",\n      targetHandle: \"left\",\n      style: {\n        stroke: \"#ef4444\",\n        strokeDasharray: \"5,5\"\n      },\n      label: \"Dirty\"\n    }, {\n      id: \"reactflow__edge-20top-source-19bottom\",\n      source: \"20\",\n      target: \"19\",\n      sourceHandle: \"top-source\",\n      targetHandle: \"bottom\",\n      style: {\n        stroke: \"#10b981\",\n        strokeDasharray: \"5,5\"\n      },\n      label: \"Clean\"\n    }, {\n      id: \"reactflow__edge-20bottom-source-21top\",\n      source: \"20\",\n      target: \"21\",\n      sourceHandle: \"bottom-source\",\n      targetHandle: \"top\",\n      style: {\n        stroke: \"#10b981\",\n        strokeDasharray: \"5,5\"\n      },\n      label: \"Clean\"\n    }, {\n      id: \"reactflow__edge-2right-source-13left\",\n      source: \"2\",\n      target: \"13\",\n      sourceHandle: \"right-source\",\n      targetHandle: \"left\",\n      style: {\n        stroke: \"#10b981\",\n        strokeWidth: 1.5\n      },\n      label: \"carrierNames\"\n    }, {\n      id: \"reactflow__edge-2right-source-14left\",\n      source: \"2\",\n      target: \"14\",\n      sourceHandle: \"right-source\",\n      targetHandle: \"left\",\n      style: {\n        stroke: \"#10b981\",\n        strokeWidth: 1.5\n      },\n      label: \"carrierNames\"\n    }, {\n      id: \"reactflow__edge-group-18top-source-group-9bottom\",\n      source: \"group-18\",\n      target: \"group-9\",\n      sourceHandle: \"top-source\",\n      targetHandle: \"bottom\",\n      style: {\n        stroke: \"#3b82f6\",\n        strokeWidth: 2,\n        strokeDasharray: \"5,5\"\n      },\n      label: \"backBoneTrunks\"\n    }];\n\n    // Generate and combine all dynamic edges\n    const gen1CarriageEdges = generateGen1CarriageEdges();\n    const gen1CustomerEdges = generateGen1CustomerEdges();\n    const initialEdges = [...baseEdges, ...gen1CarriageEdges, ...gen1CustomerEdges];\n    console.log(\"Total edges:\", initialEdges.length, \"(Base:\", baseEdges.length, \"+ Gen1 Carriage edges:\", gen1CarriageEdges.length, \"+ Gen1 Customer edges:\", gen1CustomerEdges.length, \")\");\n\n    /* ====================================================================\n     * REACT FLOW COMPONENT\n     * ====================================================================\n     */\n\n    /* COMPONENT 5: Main Network Topology Component */\n    const NetworkTopology = () => {\n      // State for nodes and edges\n      const [nodes, setNodes] = React.useState(initialNodes);\n      const [edges, setEdges] = React.useState(initialEdges);\n\n      // Node types registry - must be memoized to prevent re-creation on each render\n      const nodeTypes = React.useMemo(() => ({\n        custom: CustomNode,\n        customGroup: CustomGroupNode,\n        customText: CustomTextNode\n      }), []);\n\n      // Edge types registry - must be memoized to prevent re-creation on each render\n      const edgeTypes = React.useMemo(() => ({\n        custom: CustomEdge,\n        carrierConnection: CarrierConnectionEdge\n      }), []);\n\n      // Optional: Listen for updates from Appsmith model\n      React.useEffect(() => {\n        // You can update nodes/edges based on appsmith.model data here\n        // Example:\n        // if (appsmith.model?.nodes) {\n        //   setNodes(appsmith.model.nodes);\n        // }\n        // if (appsmith.model?.edges) {\n        //   setEdges(appsmith.model.edges);\n        // }\n        console.log(\"Network topology ready with\", nodes.length, \"nodes and\", edges.length, \"edges\");\n      }, []);\n      console.log(\"Rendering ReactFlow with nodes:\", nodes.length, \"edges:\", edges.length);\n      console.log(\"First edge:\", edges[0]);\n      return React.createElement(\"div\", {\n        style: {\n          width: \"100%\",\n          height: \"100%\"\n        }\n      }, React.createElement(ReactFlow, {\n        nodes,\n        edges,\n        nodeTypes,\n        edgeTypes,\n        fitView: true,\n        fitViewOptions: {\n          padding: 0.2,\n          includeHiddenNodes: false\n        },\n        minZoom: 0.1,\n        maxZoom: 2,\n        defaultViewport: {\n          x: 0,\n          y: 0,\n          zoom: 0.8\n        },\n        attributionPosition: \"bottom-left\",\n        onInit: instance => {\n          console.log(\"ReactFlow initialized\");\n          console.log(\"Edges in store:\", instance.getEdges().length);\n        }\n      }, React.createElement(Controls, {\n        showZoom: true,\n        showFitView: true,\n        showInteractive: true\n      }), React.createElement(MiniMap, {\n        nodeColor: node => {\n          if (node.type === \"customGroup\") return \"rgba(66, 153, 225, 0.3)\";\n          if (node.type === \"customText\") return \"#fffef0\";\n          if (node.style?.backgroundColor) return node.style.backgroundColor;\n          return \"#ffffff\";\n        },\n        maskColor: \"rgba(0, 0, 0, 0.1)\",\n        zoomable: true,\n        pannable: true\n      }), React.createElement(Background, {\n        variant: \"dots\",\n        gap: 16,\n        size: 1,\n        color: \"#e5e7eb\"\n      })));\n    };\n\n    /* ====================================================================\n     * RENDER TO DOM\n     * ====================================================================\n     */\n\n    console.log(\"‚úì Custom node components created\");\n    console.log(\"‚úì Network topology data loaded\");\n\n    // Render the React Flow component\n    const container = document.getElementById(\"root\");\n    if (!container) {\n      throw new Error(\"Root container not found\");\n    }\n    const root = ReactDOMClient.createRoot(container);\n\n    // Check if ReactFlowProvider exists\n    if (ReactFlowProvider) {\n      console.log(\"Using ReactFlowProvider to wrap app\");\n      const App = () => React.createElement(ReactFlowProvider, null, React.createElement(NetworkTopology));\n      root.render(React.createElement(App));\n    } else {\n      console.log(\"No ReactFlowProvider found, rendering directly\");\n      root.render(React.createElement(NetworkTopology));\n    }\n    console.log(\"‚úì DataTopoV1 Network Topology Rendered Successfully\");\n    console.log(\"üìä Nodes:\", initialNodes.length);\n    console.log(\"üîó Edges:\", initialEdges.length);\n  } catch (error) {\n    console.error(\"‚ùå Error initializing network topology:\", error);\n    const container = document.getElementById(\"root\");\n    if (container) {\n      container.innerHTML = '<div class=\"topology-error\">' + \"<h3>Error Loading Network Topology</h3>\" + \"<p><strong>Error:</strong> \" + error.message + \"</p>\" + \"<pre>\" + error.stack + \"</pre>\" + \"</div>\";\n    }\n  }\n}\n\n/* ========================================================================\n * APPSMITH MODEL UPDATE HANDLER (Optional)\n * ========================================================================\n */\n\n// Listen for model updates from Appsmith\n// Uncomment and customize if you want to update the diagram based on external data\n\n/*\nappsmith.onModelChange(() => {\n  console.log('Model data updated:', appsmith.model);\n  // You can trigger re-renders or update the topology here\n  // For example, pass new nodes/edges from a database query\n});\n*/\n\n/* ========================================================================\n * UTILITY FUNCTIONS (Optional)\n * ========================================================================\n */\n\n// Helper function to format node data\nfunction formatNodeLabel(data) {\n  if (!data) return \"N/A\";\n  if (typeof data === \"string\") return data;\n  return JSON.stringify(data);\n}\n\n// Helper function to validate edge connections\nfunction isValidConnection(connection) {\n  return connection.source && connection.target;\n}\nconsole.log(\"‚úì DataTopoV1 widget script loaded\");"
  },
  "theme": "{{appsmith.theme}}",
  "topRow": 8,
  "type": "CUSTOM_WIDGET",
  "uncompiledSrcDoc": {
    "css": "/* ============================================================================\n   DATA TOPOLOGY V1 - CSS STYLES FOR APPSMITH WIDGET\n   ============================================================================\n\n   This CSS file contains all styling for the dataTopoV1 network topology\n   React Flow diagram, including custom node types and layout.\n\n   Copy this content into the \"CSS\" tab of your Custom Widget Builder.\n\n   ============================================================================ */\n\n/* ============================================================================\n   SECTION 1: Container Reset & Layout\n   ============================================================================ */\n\n/* Function 1.1: Reset default styles and ensure full viewport */\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n/* Function 1.2: Root container takes full widget space */\n#root {\n  width: 100%;\n  height: 100%;\n  min-height: 600px;\n  position: relative;\n  overflow: hidden;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n/* ============================================================================\n   SECTION 2: React Flow Specific Overrides\n   ============================================================================ */\n\n/* Function 2.1: Ensure React Flow container fills space */\n.react-flow {\n  width: 100% !important;\n  height: 100% !important;\n}\n\n/* Function 2.2: Style minimap for better visibility */\n.react-flow__minimap {\n  background-color: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 4px;\n}\n\n/* Function 2.3: Style controls panel */\n.react-flow__controls {\n  background-color: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n/* Function 2.4: Style control buttons */\n.react-flow__controls-button {\n  border-bottom: 1px solid #e5e7eb;\n  background-color: white;\n  transition: background-color 0.2s;\n}\n\n.react-flow__controls-button:hover {\n  background-color: #f3f4f6;\n}\n\n.react-flow__controls-button:last-child {\n  border-bottom: none;\n}\n\n/* ============================================================================\n   SECTION 3: Custom Node Types - Standard Node\n   ============================================================================ */\n\n/* Function 3.1: Custom node base styling */\n.custom-node {\n  padding: 10px 20px;\n  border-radius: 5px;\n  border: 2px solid #1a192b;\n  min-width: 100px;\n  min-height: 50px;\n  width: 100%;\n  height: 100%;\n  text-align: center;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #ffffff;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  transition: box-shadow 0.2s;\n}\n\n.custom-node:hover {\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n}\n\n.custom-node-content {\n  font-size: 14px;\n  color: #222;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  word-wrap: break-word;\n  padding: 5px;\n}\n\n/* Function 3.2: Node selection highlighting */\n.react-flow__node.selected .custom-node {\n  box-shadow: 0 0 0 3px #3b82f6;\n}\n\n/* ============================================================================\n   SECTION 4: Custom Node Types - Group Node\n   ============================================================================ */\n\n/* Function 4.1: Custom group node for containers */\n.custom-group-node {\n  width: 100%;\n  height: 100%;\n  background: rgba(240, 240, 255, 0.25);\n  border: 2px dashed #4299e1;\n  border-radius: 8px;\n  position: relative;\n  padding: 10px;\n  pointer-events: none;\n}\n\n.custom-group-node-label {\n  position: absolute;\n  top: 5px;\n  left: 10px;\n  font-size: 14px;\n  font-weight: 600;\n  color: #2d3748;\n  background: rgba(255, 255, 255, 0.9);\n  padding: 4px 8px;\n  border-radius: 4px;\n  border: 1px solid #cbd5e0;\n  z-index: 10;\n  pointer-events: all;\n}\n\n/* ============================================================================\n   SECTION 5: Custom Node Types - Text Node\n   ============================================================================ */\n\n/* Function 5.1: Custom text node for annotations */\n.custom-text-node {\n  padding: 12px;\n  border-radius: 4px;\n  border: 1px solid #cbd5e0;\n  min-width: 150px;\n  min-height: 100px;\n  width: 100%;\n  height: 100%;\n  position: relative;\n  display: flex;\n  align-items: flex-start;\n  justify-content: flex-start;\n  background: #fffef0;\n}\n\n.custom-text-node-content {\n  font-size: 13px;\n  color: #222;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  overflow-wrap: break-word;\n  padding: 5px;\n  width: 100%;\n  height: 100%;\n  overflow-y: auto;\n  line-height: 1.5;\n  text-align: left;\n}\n\n/* ============================================================================\n   SECTION 6: Handle (Connection Point) Styling\n   ============================================================================ */\n\n/* Function 6.1: Base handle styling for all nodes */\n.react-flow__handle {\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background: #555;\n  border: 2px solid white;\n  transition: all 0.2s;\n}\n\n.custom-node .react-flow__handle,\n.custom-group-node .react-flow__handle,\n.custom-text-node .react-flow__handle {\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  border: 2px solid white;\n}\n\n.custom-node .react-flow__handle {\n  background: #555;\n}\n\n.custom-group-node .react-flow__handle {\n  background: #4299e1;\n  pointer-events: all;\n}\n\n.custom-text-node .react-flow__handle {\n  background: #555;\n}\n\n/* Function 6.2: Handle position adjustments */\n.react-flow__handle-top {\n  top: -6px;\n}\n\n.react-flow__handle-bottom {\n  bottom: -6px;\n}\n\n.react-flow__handle-left {\n  left: -6px;\n}\n\n.react-flow__handle-right {\n  right: -6px;\n}\n\n/* Function 6.3: Handle hover state */\n.react-flow__handle:hover {\n  background-color: #3b82f6;\n  transform: scale(1.2);\n}\n\n/* Function 6.4: Handle connection state */\n.react-flow__handle-connecting {\n  background-color: #10b981;\n}\n\n/* Function 6.5: Valid connection target */\n.react-flow__handle-valid {\n  background-color: #10b981;\n}\n\n/* ============================================================================\n   SECTION 7: Edge (Connection) Styling\n   ============================================================================ */\n\n/* Function 7.1: Edge label styling */\n.react-flow__edge-text {\n  font-size: 11px;\n  font-weight: 600;\n  fill: #374151;\n}\n\n/* Function 7.1b: Edge label foreignObject styling for HTML labels */\n.react-flow__edge foreignObject {\n  overflow: visible;\n}\n\n.react-flow__edge foreignObject > div {\n  transform: translate(-50%, -50%);\n}\n\n/* Function 7.1c: Edge label background */\n.react-flow__edge-textbg {\n  fill: rgba(255, 255, 255, 0.9);\n  rx: 4;\n  ry: 4;\n}\n\n/* Function 7.2: Connection line preview */\n.react-flow__connection-path {\n  stroke: #6366f1;\n  stroke-width: 2;\n}\n\n/* Function 7.3: Selected edge highlighting */\n.react-flow__edge.selected .react-flow__edge-path {\n  stroke: #3b82f6;\n  stroke-width: 3;\n}\n\n/* ============================================================================\n   SECTION 8: Background & Grid\n   ============================================================================ */\n\n/* Function 8.1: Background pattern styling */\n.react-flow__background {\n  background-color: #ffffff;\n}\n\n/* Function 8.2: Grid dot styling */\n.react-flow__background-pattern {\n  fill: #e5e7eb;\n}\n\n/* ============================================================================\n   SECTION 9: Node Resizer Styling\n   ============================================================================ */\n\n/* Function 9.1: Custom node resizer */\n.custom-node-resizer-line {\n  border-color: #4299e1 !important;\n  border-width: 2px !important;\n}\n\n.custom-node-resizer-handle {\n  width: 10px !important;\n  height: 10px !important;\n  border-radius: 2px !important;\n  background-color: #4299e1 !important;\n}\n\n/* Function 9.2: Group node resizer */\n.custom-group-resizer-line {\n  border-color: #3182ce !important;\n  border-width: 2px !important;\n  border-style: solid !important;\n  pointer-events: all !important;\n}\n\n.custom-group-resizer-handle {\n  width: 12px !important;\n  height: 12px !important;\n  border-radius: 2px !important;\n  background-color: #3182ce !important;\n  pointer-events: all !important;\n}\n\n.custom-group-node .react-flow__resize-control {\n  pointer-events: all !important;\n}\n\n/* Function 9.3: Text node resizer */\n.custom-text-node-resizer-line {\n  border-color: #4299e1 !important;\n  border-width: 2px !important;\n}\n\n.custom-text-node-resizer-handle {\n  width: 10px !important;\n  height: 10px !important;\n  border-radius: 2px !important;\n  background-color: #4299e1 !important;\n}\n\n/* ============================================================================\n   SECTION 10: Loading & Error States\n   ============================================================================ */\n\n/* Function 10.1: Loading indicator */\n.topology-loading {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n  color: #6b7280;\n  font-size: 14px;\n}\n\n/* Function 10.2: Error message styling */\n.topology-error {\n  padding: 20px;\n  color: #ef4444;\n  font-family: monospace;\n  background-color: #fef2f2;\n  border: 1px solid #fecaca;\n  border-radius: 6px;\n  margin: 20px;\n  font-size: 13px;\n}\n\n.topology-error h3 {\n  margin-bottom: 10px;\n  color: #dc2626;\n}\n\n.topology-error pre {\n  background: #f5f5f5;\n  padding: 10px;\n  overflow: auto;\n  border-radius: 4px;\n  font-size: 11px;\n}\n\n/* ============================================================================\n   SECTION 11: Utility Classes\n   ============================================================================ */\n\n/* Function 11.1: Text utilities */\n.text-center {\n  text-align: center;\n}\n\n.text-left {\n  text-align: left;\n}\n\n.pre-line {\n  white-space: pre-line;\n}\n\n/* Function 11.2: Spacing utilities */\n.p-20 {\n  padding: 20px;\n}\n\n.m-20 {\n  margin: 20px;\n}\n",
    "html": "<!-- ============================================================================\n     DATA TOPOLOGY V1 - HTML COMPONENT FOR APPSMITH\n     ============================================================================\n\n     This is the HTML section of the Appsmith Custom Widget for the\n     dataTopoV1 network topology diagram.\n\n     Copy this content into the \"HTML\" tab of your Custom Widget Builder.\n\n     Components:\n     1. Root container for React rendering\n     2. Import map for ESM module resolution\n     3. React Flow CSS stylesheet\n\n     ============================================================================\n-->\n\n<!-- Root Container -->\n<div id=\"root\" style=\"width: 100%; height: 800px;\"></div>\n\n<!-- React Flow CSS -->\n<link\n  href=\"https://cdn.jsdelivr.net/npm/reactflow@11.11.4/dist/style.min.css\"\n  rel=\"stylesheet\"\n/>\n",
    "js": "/* ============================================================================\n * DATA TOPOLOGY V1 - APPSMITH CUSTOM WIDGET JAVASCRIPT\n * ============================================================================\n *\n * Project: Network Topology Visualization with React Flow\n * Template: dataTopoV1 (Auto-generated flow)\n * Created: November 2025\n *\n * Purpose: Interactive network topology diagram using React Flow with\n * custom node types (CustomNode, CustomGroupNode, CustomTextNode)\n *\n * Appsmith Integration:\n * - Uses appsmith.onReady() for initialization\n * - Supports dynamic data updates via appsmith.model\n * - ESM module imports for React and React Flow\n *\n * Copy this content into the \"JS\" tab of your Custom Widget Builder.\n *\n * ============================================================================\n */\n\n/* ========================================================================\n * APPSMITH INITIALIZATION\n * ========================================================================\n */\n\nappsmith.onReady(() => {\n  console.log(\"=== DataTopoV1 Network Topology Initializing ===\");\n\n  // Main initialization function\n  initializeNetworkTopology();\n});\n\n/* ========================================================================\n * MAIN INITIALIZATION FUNCTION\n * ========================================================================\n */\n\nasync function initializeNetworkTopology() {\n  try {\n    /* STEP 1: Import React Libraries - Share same instance globally */\n    if (!window.React) {\n      window.React = await import(\"https://esm.sh/react@18.3.1\");\n    }\n    if (!window.ReactDOM) {\n      window.ReactDOM = await import(\"https://esm.sh/react-dom@18.3.1\");\n    }\n\n    const React = window.React;\n    const ReactDOMClient = await import(\n      \"https://esm.sh/react-dom@18.3.1/client\"\n    );\n\n    // Import ReactFlow with pinned React version\n    const ReactFlowModule = await import(\n      \"https://esm.sh/reactflow@11.11.4?deps=react@18.3.1,react-dom@18.3.1&bundle\"\n    );\n\n    const {\n      default: ReactFlow,\n      Controls,\n      Background,\n      MiniMap,\n      Handle,\n      Position,\n      NodeResizer,\n      ReactFlowProvider,\n      getBezierPath,\n      EdgeLabelRenderer,\n      BaseEdge,\n    } = ReactFlowModule;\n\n    console.log(\"‚úì React and React Flow modules loaded\");\n    console.log(\"ReactFlowProvider available:\", typeof ReactFlowProvider);\n\n    /* ====================================================================\n     * CUSTOM EDGE COMPONENT\n     * ====================================================================\n     */\n\n    /* COMPONENT: CarrierConnectionEdge - Edge for carrier connections with comma-based wrapping */\n    const CarrierConnectionEdge = ({\n      id,\n      sourceX,\n      sourceY,\n      targetX,\n      targetY,\n      sourcePosition,\n      targetPosition,\n      style = {},\n      data,\n    }) => {\n      const [edgePath, labelX, labelY] = getBezierPath({\n        sourceX,\n        sourceY,\n        sourcePosition,\n        targetX,\n        targetY,\n        targetPosition,\n      });\n\n      // Helper function to wrap text only at commas with max width\n      const wrapAtCommas = (text, maxWidth = 200) => {\n        if (!text) return [];\n\n        const items = text.split(\",\").map((item) => item.trim());\n        const lines = [];\n        let currentLine = \"\";\n\n        items.forEach((item, index) => {\n          const isLast = index === items.length - 1;\n          const itemWithComma = isLast ? item : item + \",\";\n\n          // Estimate character width (roughly 6-7px per char at 11px font)\n          const estimatedWidth = (currentLine + \" \" + itemWithComma).length * 7;\n\n          if (currentLine === \"\") {\n            currentLine = itemWithComma;\n          } else if (estimatedWidth <= maxWidth) {\n            currentLine += \" \" + itemWithComma;\n          } else {\n            lines.push(currentLine);\n            currentLine = itemWithComma;\n          }\n        });\n\n        if (currentLine) lines.push(currentLine);\n        return lines;\n      };\n\n      const labelLines = data?.label\n        ? wrapAtCommas(data.label, data.maxWidth || 200)\n        : [];\n\n      return React.createElement(\n        React.Fragment,\n        null,\n        React.createElement(BaseEdge, { path: edgePath, style: style }),\n        labelLines.length > 0 &&\n          React.createElement(\n            EdgeLabelRenderer,\n            null,\n            React.createElement(\n              \"div\",\n              {\n                style: {\n                  position: \"absolute\",\n                  transform: `translate(-50%, -50%) translate(${labelX}px,${labelY}px)`,\n                  background: \"rgba(255, 255, 255, 0.95)\",\n                  padding: \"6px 10px\",\n                  borderRadius: \"4px\",\n                  fontSize: \"11px\",\n                  border: \"1px solid #e5e7eb\",\n                  lineHeight: \"1.5\",\n                  whiteSpace: \"nowrap\",\n                  textAlign: \"left\",\n                  boxShadow: \"0 1px 3px rgba(0,0,0,0.1)\",\n                  fontFamily:\n                    '-apple-system, BlinkMacSystemFont, \"Segoe UI\", sans-serif',\n                  pointerEvents: \"all\",\n                  maxWidth: `${data.maxWidth || 200}px`,\n                },\n                className: \"nodrag nopan\",\n              },\n              labelLines.map((line, idx) =>\n                React.createElement(\"div\", { key: idx }, line),\n              ),\n            ),\n          ),\n      );\n    };\n\n    /* COMPONENT: CustomEdge - Edge with multi-line label */\n    const CustomEdge = ({\n      id,\n      sourceX,\n      sourceY,\n      targetX,\n      targetY,\n      sourcePosition,\n      targetPosition,\n      style = {},\n      data,\n    }) => {\n      const [edgePath, labelX, labelY] = getBezierPath({\n        sourceX,\n        sourceY,\n        sourcePosition,\n        targetX,\n        targetY,\n        targetPosition,\n      });\n\n      // Helper function to wrap text at max character length\n      const wrapText = (text, maxLength = 60) => {\n        if (!text || text.length <= maxLength) return [text];\n\n        const lines = [];\n        let currentLine = \"\";\n        const words = text.split(\" \");\n\n        for (const word of words) {\n          if ((currentLine + \" \" + word).trim().length <= maxLength) {\n            currentLine = currentLine ? currentLine + \" \" + word : word;\n          } else {\n            if (currentLine) lines.push(currentLine);\n            currentLine = word;\n          }\n        }\n        if (currentLine) lines.push(currentLine);\n\n        return lines;\n      };\n\n      // Wrap each line if needed\n      const line1Parts = data?.label?.line1 ? wrapText(data.label.line1) : [];\n      const line2Parts = data?.label?.line2 ? wrapText(data.label.line2) : [];\n      const line3Parts = data?.label?.line3 ? wrapText(data.label.line3) : [];\n\n      return React.createElement(\n        React.Fragment,\n        null,\n        React.createElement(BaseEdge, { path: edgePath, style: style }),\n        data &&\n          data.label &&\n          React.createElement(\n            EdgeLabelRenderer,\n            null,\n            React.createElement(\n              \"div\",\n              {\n                style: {\n                  position: \"absolute\",\n                  transform: `translate(-50%, -50%) translate(${labelX}px,${labelY}px)`,\n                  background: \"rgba(255, 255, 255, 0.95)\",\n                  padding: \"6px 10px\",\n                  borderRadius: \"4px\",\n                  fontSize: \"11px\",\n                  border: \"1px solid #e5e7eb\",\n                  lineHeight: \"1.5\",\n                  whiteSpace: \"pre-wrap\",\n                  textAlign: \"left\",\n                  boxShadow: \"0 1px 3px rgba(0,0,0,0.1)\",\n                  fontFamily:\n                    '-apple-system, BlinkMacSystemFont, \"Segoe UI\", sans-serif',\n                  pointerEvents: \"all\",\n                  maxWidth: \"300px\",\n                },\n                className: \"nodrag nopan\",\n              },\n              line1Parts.map((part, idx) =>\n                React.createElement(\"div\", { key: `line1-${idx}` }, part),\n              ),\n              line2Parts.map((part, idx) =>\n                React.createElement(\"div\", { key: `line2-${idx}` }, part),\n              ),\n              line3Parts.map((part, idx) =>\n                React.createElement(\"div\", { key: `line3-${idx}` }, part),\n              ),\n            ),\n          ),\n      );\n    };\n\n    /* ====================================================================\n     * CUSTOM NODE COMPONENTS\n     * ====================================================================\n     */\n\n    /* COMPONENT 1: CustomNode - Standard resizable node with handles */\n    const CustomNode = ({ data, isConnectable, selected }) => {\n      const labelText = String(data?.label || \"\");\n\n      // Split label by newlines and create separate divs for each line\n      const labelLines = labelText\n        .split(\"\\n\")\n        .map((line, index) => React.createElement(\"div\", { key: index }, line));\n\n      return React.createElement(\n        \"div\",\n        { className: \"custom-node\" },\n        React.createElement(NodeResizer, {\n          minWidth: 100,\n          minHeight: 50,\n          isVisible: selected,\n        }),\n        React.createElement(Handle, {\n          type: \"target\",\n          position: Position.Top,\n          id: \"top\",\n          isConnectable,\n        }),\n        React.createElement(Handle, {\n          type: \"target\",\n          position: Position.Left,\n          id: \"left\",\n          isConnectable,\n        }),\n        React.createElement(Handle, {\n          type: \"target\",\n          position: Position.Right,\n          id: \"right\",\n          isConnectable,\n        }),\n        React.createElement(Handle, {\n          type: \"target\",\n          position: Position.Bottom,\n          id: \"bottom\",\n          isConnectable,\n        }),\n        React.createElement(\n          \"div\",\n          { className: \"custom-node-content\" },\n          ...labelLines,\n        ),\n        React.createElement(Handle, {\n          type: \"source\",\n          position: Position.Top,\n          id: \"top-source\",\n          isConnectable,\n        }),\n        React.createElement(Handle, {\n          type: \"source\",\n          position: Position.Left,\n          id: \"left-source\",\n          isConnectable,\n        }),\n        React.createElement(Handle, {\n          type: \"source\",\n          position: Position.Right,\n          id: \"right-source\",\n          isConnectable,\n        }),\n        React.createElement(Handle, {\n          type: \"source\",\n          position: Position.Bottom,\n          id: \"bottom-source\",\n          isConnectable,\n        }),\n      );\n    };\n\n    /* COMPONENT 2: CustomGroupNode - Group/container node */\n    const CustomGroupNode = ({ data, isConnectable, selected }) => {\n      const labelText = String(data?.label || \"\");\n\n      return React.createElement(\n        \"div\",\n        { className: \"custom-group-node\" },\n        React.createElement(NodeResizer, {\n          minWidth: 200,\n          minHeight: 150,\n          isVisible: selected,\n        }),\n        React.createElement(Handle, {\n          type: \"target\",\n          position: Position.Top,\n          id: \"top\",\n          isConnectable,\n        }),\n        React.createElement(Handle, {\n          type: \"target\",\n          position: Position.Left,\n          id: \"left\",\n          isConnectable,\n        }),\n        React.createElement(Handle, {\n          type: \"target\",\n          position: Position.Right,\n          id: \"right\",\n          isConnectable,\n        }),\n        React.createElement(Handle, {\n          type: \"target\",\n          position: Position.Bottom,\n          id: \"bottom\",\n          isConnectable,\n        }),\n        React.createElement(\n          \"div\",\n          { className: \"custom-group-node-label\" },\n          labelText,\n        ),\n        React.createElement(Handle, {\n          type: \"source\",\n          position: Position.Top,\n          id: \"top-source\",\n          isConnectable,\n        }),\n        React.createElement(Handle, {\n          type: \"source\",\n          position: Position.Left,\n          id: \"left-source\",\n          isConnectable,\n        }),\n        React.createElement(Handle, {\n          type: \"source\",\n          position: Position.Right,\n          id: \"right-source\",\n          isConnectable,\n        }),\n        React.createElement(Handle, {\n          type: \"source\",\n          position: Position.Bottom,\n          id: \"bottom-source\",\n          isConnectable,\n        }),\n      );\n    };\n\n    /* COMPONENT 3: CustomTextNode - Text/annotation node */\n    const CustomTextNode = ({ data, isConnectable, selected }) => {\n      const labelText = String(data?.label || \"\");\n\n      return React.createElement(\n        \"div\",\n        { className: \"custom-text-node\" },\n        React.createElement(NodeResizer, {\n          minWidth: 150,\n          minHeight: 100,\n          isVisible: selected,\n        }),\n        React.createElement(Handle, {\n          type: \"target\",\n          position: Position.Top,\n          id: \"top\",\n          isConnectable,\n        }),\n        React.createElement(Handle, {\n          type: \"target\",\n          position: Position.Left,\n          id: \"left\",\n          isConnectable,\n        }),\n        React.createElement(Handle, {\n          type: \"target\",\n          position: Position.Right,\n          id: \"right\",\n          isConnectable,\n        }),\n        React.createElement(Handle, {\n          type: \"target\",\n          position: Position.Bottom,\n          id: \"bottom\",\n          isConnectable,\n        }),\n        React.createElement(\n          \"div\",\n          { className: \"custom-text-node-content\" },\n          labelText,\n        ),\n        React.createElement(Handle, {\n          type: \"source\",\n          position: Position.Top,\n          id: \"top-source\",\n          isConnectable,\n        }),\n        React.createElement(Handle, {\n          type: \"source\",\n          position: Position.Left,\n          id: \"left-source\",\n          isConnectable,\n        }),\n        React.createElement(Handle, {\n          type: \"source\",\n          position: Position.Right,\n          id: \"right-source\",\n          isConnectable,\n        }),\n        React.createElement(Handle, {\n          type: \"source\",\n          position: Position.Bottom,\n          id: \"bottom-source\",\n          isConnectable,\n        }),\n      );\n    };\n\n    /* ====================================================================\n     * NETWORK TOPOLOGY DATA - dataTopoV1\n     * ====================================================================\n     */\n\n    /* HELPER: Enhance DataCentre Nodes with SIP Interface IPs */\n    function enhanceDataCentreNodes(baseNodes) {\n      // Get customer data from appsmith model or use empty array\n      const customerData =\n        typeof appsmith !== \"undefined\" && appsmith.model?.customerData\n          ? appsmith.model.customerData\n          : [];\n\n      // Map data_source to node IDs\n      const dataSourceToNodeId = {\n        SYD1A: \"19\",\n        SYD2A: \"21\",\n        SEMA: \"20\",\n      };\n\n      // Collect SIP interface IPs by data source\n      const sipInterfacesByNode = {};\n      customerData.forEach((customer) => {\n        if (customer.data_source && customer.sip_interface_ips) {\n          const nodeId = dataSourceToNodeId[customer.data_source];\n          if (nodeId) {\n            if (!sipInterfacesByNode[nodeId]) {\n              sipInterfacesByNode[nodeId] = new Set();\n            }\n            // Add IPs to the set (automatically deduplicates)\n            const ips = customer.sip_interface_ips\n              .split(\",\")\n              .map((ip) => ip.trim());\n            ips.forEach((ip) => sipInterfacesByNode[nodeId].add(ip));\n          }\n        }\n      });\n\n      // Update node labels with SIP interface IPs\n      return baseNodes.map((node) => {\n        if (sipInterfacesByNode[node.id]) {\n          const ips = Array.from(sipInterfacesByNode[node.id]).join(\", \");\n          const originalLabel = node.data.label;\n          return {\n            ...node,\n            data: {\n              ...node.data,\n              label: `${originalLabel}\\nSIP Interfaces: ${ips}`,\n            },\n          };\n        }\n        return node;\n      });\n    }\n\n    /* HELPER: Generate Gen1 Customer Nodes from appsmith data */\n    function generateGen1CustomerNodes() {\n      const customerNodes = [];\n\n      // Get customer data from appsmith model or use empty array\n      const customerData =\n        typeof appsmith !== \"undefined\" && appsmith.model?.customerData\n          ? appsmith.model.customerData\n          : [];\n\n      console.log(\"=== Gen1 Customer Data ===\");\n      console.log(\"Total records:\", customerData.length);\n      console.log(\"Sample record:\", customerData[0]);\n\n      // Filter for Gen1 customers (those with data_source field)\n      const gen1Customers = customerData.filter(\n        (c) => c.data_source && c.account_no,\n      );\n\n      console.log(\"Gen1 records found:\", gen1Customers.length);\n\n      if (gen1Customers.length === 0) {\n        console.log(\"No Gen1 customers to display\");\n        return customerNodes;\n      }\n\n      // Group by account number to avoid duplicates\n      // Since the dropdown filters to one account, this will typically be one customer\n      const uniqueCustomers = {};\n      gen1Customers.forEach((customer) => {\n        if (!uniqueCustomers[customer.account_no]) {\n          uniqueCustomers[customer.account_no] = customer;\n        }\n      });\n\n      console.log(\n        \"Unique Gen1 customers:\",\n        Object.keys(uniqueCustomers).length,\n      );\n\n      // Create nodes for each unique Gen1 customer\n      let yOffset = 250; // Start 150px lower (was 100, now 250)\n      Object.values(uniqueCustomers).forEach((customer, index) => {\n        const nodeId = `gen1-customer-${customer.account_no}`;\n\n        // Log what we're creating\n        console.log(\n          `Creating node for: ${customer.customer} (${customer.account_no})`,\n        );\n\n        customerNodes.push({\n          id: nodeId,\n          type: \"custom\",\n          data: {\n            label: `${customer.customer}\\nAccount: ${customer.account_no}`,\n          },\n          position: {\n            x: 1000, // Move 100px to the right (was 900, now 1000)\n            y: yOffset + index * 120,\n          },\n          style: {\n            width: 250,\n            height: 80,\n            backgroundColor: \"#e0f2fe\",\n          },\n        });\n      });\n\n      console.log(\"Customer nodes created:\", customerNodes.length);\n      return customerNodes;\n    }\n\n    /* HELPER: Generate edges for Gen1 Carriage to Data Centers */\n    function generateGen1CarriageEdges() {\n      const carriageEdges = [];\n\n      // Get customer data from appsmith model or use empty array\n      const customerData =\n        typeof appsmith !== \"undefined\" && appsmith.model?.customerData\n          ? appsmith.model.customerData\n          : [];\n\n      // Map data_source to node IDs\n      const dataSourceToNodeId = {\n        SYD1A: \"19\",\n        SYD2A: \"21\",\n        SEMA: \"20\",\n      };\n\n      // Collect carrier connections by data source\n      const carriersByDataSource = {};\n      customerData.forEach((customer) => {\n        if (customer.data_source && customer.carrier_connections) {\n          const dataSource = customer.data_source;\n          if (!carriersByDataSource[dataSource]) {\n            carriersByDataSource[dataSource] = new Set();\n          }\n          // Split carrier connections and add to set\n          const carriers = customer.carrier_connections\n            .split(\",\")\n            .map((c) => c.trim());\n          carriers.forEach((carrier) => {\n            if (carrier) carriersByDataSource[dataSource].add(carrier);\n          });\n        }\n      });\n\n      // Create edges from Gen1 Carriage to data centers\n      Object.keys(carriersByDataSource).forEach((dataSource) => {\n        const dataNodeId = dataSourceToNodeId[dataSource];\n        if (dataNodeId) {\n          const carriers = Array.from(carriersByDataSource[dataSource]).join(\n            \", \",\n          );\n\n          carriageEdges.push({\n            id: `reactflow__edge-1right-source-${dataNodeId}left`,\n            source: \"1\", // Gen1 Carriage node\n            target: dataNodeId,\n            sourceHandle: \"right-source\",\n            targetHandle: \"left\",\n            type: \"carrierConnection\",\n            style: {\n              strokeWidth: 1.5,\n              stroke: \"#10b981\",\n            },\n            data: {\n              label: carriers,\n              maxWidth: 200,\n            },\n          });\n        }\n      });\n\n      console.log(\"Gen1 Carriage edges created:\", carriageEdges.length);\n      return carriageEdges;\n    }\n\n    /* HELPER: Generate edges for Gen1 Customers to Data Centers */\n    function generateGen1CustomerEdges() {\n      const customerEdges = [];\n\n      // Get customer data from appsmith model or use empty array\n      const customerData =\n        typeof appsmith !== \"undefined\" && appsmith.model?.customerData\n          ? appsmith.model.customerData\n          : [];\n\n      // Filter for Gen1 customers (those with data_source field)\n      const gen1Customers = customerData.filter(\n        (c) => c.data_source && c.account_no,\n      );\n\n      // Map data_source values to node IDs\n      const dataSourceToNodeId = {\n        SYD1A: \"19\", // SYD1 node\n        SYD2A: \"21\", // SYD2 node\n        SEMA: \"20\", // SEMA node\n      };\n\n      // Group by account number and data source to collect connection details\n      const customerConnections = {};\n      gen1Customers.forEach((customer) => {\n        const accountNo = customer.account_no;\n        const dataSource = customer.data_source;\n\n        if (!dataSource || !dataSourceToNodeId[dataSource]) return;\n\n        const connectionKey = `${accountNo}-${dataSource}`;\n        if (!customerConnections[connectionKey]) {\n          customerConnections[connectionKey] = {\n            accountNo: accountNo,\n            dataSource: dataSource,\n            sourceRealm: customer.source_realm || \"N/A\",\n            sessionAgents: customer.customer_realm_session_agents || \"N/A\",\n            genesysDomains: customer.genesys_purecloud_domains || \"\", // Blank instead of N/A\n          };\n        }\n      });\n\n      // Create edges from data centers to customer nodes\n      Object.values(customerConnections).forEach((connection) => {\n        const customerNodeId = `gen1-customer-${connection.accountNo}`;\n        const dataNodeId = dataSourceToNodeId[connection.dataSource];\n\n        if (dataNodeId) {\n          // Check if all data is N/A or empty - skip edge if so\n          const hasValidData =\n            connection.sourceRealm !== \"N/A\" ||\n            connection.sessionAgents !== \"N/A\" ||\n            (connection.genesysDomains && connection.genesysDomains !== \"\");\n\n          if (!hasValidData) {\n            console.log(\n              `Skipping edge for ${connection.accountNo} - ${connection.dataSource}: all data is N/A or empty`,\n            );\n            return; // Skip this edge\n          }\n\n          // Build label lines\n          const labelLines = {\n            line1: `source_realm: ${connection.sourceRealm}`,\n            line2: `Session Agents: ${connection.sessionAgents}`,\n            line3: \"\", // Will be set below if there's a Genesys domain\n          };\n\n          // Add Genesys domain on separate line if it exists\n          if (\n            connection.genesysDomains &&\n            connection.genesysDomains.trim() !== \"\"\n          ) {\n            labelLines.line3 = connection.genesysDomains;\n          }\n\n          // Create edge with custom data for multi-line label\n          customerEdges.push({\n            id: `reactflow__edge-${dataNodeId}right-source-${customerNodeId}left`,\n            source: dataNodeId,\n            target: customerNodeId,\n            sourceHandle: \"right-source\",\n            targetHandle: \"left\",\n            type: \"custom\",\n            style: {\n              strokeWidth: 1.5,\n              stroke: \"#f97316\",\n            },\n            data: {\n              label: labelLines,\n            },\n          });\n        }\n      });\n\n      console.log(\"Customer edges created:\", customerEdges.length);\n      return customerEdges;\n    }\n\n    /* DATA: Initial nodes from dataTopoV1 export */\n    const baseNodes = [\n      {\n        id: \"1\",\n        type: \"custom\",\n        data: {\n          label: \"Gen1 Carriage\",\n        },\n        position: {\n          x: -92.23607459514959,\n          y: 254.45662088626688,\n        },\n        style: {\n          width: 150,\n          height: 60,\n          backgroundColor: \"#ffffff\",\n        },\n      },\n      {\n        id: \"2\",\n        type: \"custom\",\n        data: {\n          label: \"IVP Carriage\",\n        },\n        position: {\n          x: -26.585126130654658,\n          y: -163.33815637366678,\n        },\n        style: {\n          width: 150,\n          height: 60,\n          backgroundColor: \"#ffffff\",\n        },\n      },\n      {\n        id: \"group-9\",\n        type: \"customGroup\",\n        data: {\n          label: \"IVP Cloud\",\n        },\n        position: {\n          x: 290.0499501427992,\n          y: -259.72884777726097,\n        },\n        style: {\n          width: 255,\n          height: 239,\n        },\n      },\n      {\n        id: \"13\",\n        type: \"custom\",\n        data: {\n          label: \"AU1\",\n        },\n        position: {\n          x: 15.433429384550266,\n          y: 52.558069192486755,\n        },\n        parentNode: \"group-9\",\n        extent: \"parent\",\n        style: {\n          width: 217,\n          height: 62,\n          backgroundColor: \"#ffffff\",\n        },\n      },\n      {\n        id: \"14\",\n        type: \"custom\",\n        data: {\n          label: \"AU2\",\n        },\n        position: {\n          x: 14.291786730687818,\n          y: 147.31440946306867,\n        },\n        parentNode: \"group-9\",\n        extent: \"parent\",\n        style: {\n          width: 220,\n          height: 60,\n          backgroundColor: \"#ffffff\",\n        },\n      },\n      {\n        id: \"group-18\",\n        type: \"customGroup\",\n        data: {\n          label: \"DataCentres\",\n        },\n        position: {\n          x: 292.71345699905817,\n          y: 103.65544196480488,\n        },\n        style: {\n          width: 247,\n          height: 346,\n        },\n      },\n      {\n        id: \"19\",\n        type: \"custom\",\n        data: {\n          label: \"SYD1\",\n        },\n        position: {\n          x: 24.16259636112767,\n          y: 48.32519272225525,\n        },\n        parentNode: \"group-18\",\n        extent: \"parent\",\n        style: {\n          width: 204,\n          height: 50,\n          backgroundColor: \"#ffffff\",\n        },\n      },\n      {\n        id: \"20\",\n        type: \"custom\",\n        data: {\n          label: \"SEMA\",\n        },\n        position: {\n          x: 76.24149643709859,\n          y: 159.51681709290574,\n        },\n        parentNode: \"group-18\",\n        extent: \"parent\",\n        style: {\n          width: 100,\n          height: 50,\n          backgroundColor: \"#ffffff\",\n        },\n      },\n      {\n        id: \"21\",\n        type: \"custom\",\n        data: {\n          label: \"SYD2\",\n        },\n        position: {\n          x: 24.6304399893541,\n          y: 271.2658757959249,\n        },\n        parentNode: \"group-18\",\n        extent: \"parent\",\n        style: {\n          width: 202,\n          height: 50,\n          backgroundColor: \"#ffffff\",\n        },\n      },\n      {\n        id: \"text-22\",\n        type: \"customText\",\n        data: {\n          label:\n            \"Local Policy SYD1 (AccountNo)\\n... MARKDOWN OR HTML TABLE ...\",\n        },\n        position: {\n          x: 205.94479273208458,\n          y: 464.85861934738887,\n        },\n        style: {\n          width: 424,\n          height: 186,\n          backgroundColor: \"#fffef0\",\n        },\n      },\n      {\n        id: \"text-23\",\n        type: \"customText\",\n        data: {\n          label: \"IVP CUSTOMER PHONE #s\\n... MARKDOWN OR HTML TABLE ...\",\n        },\n        position: {\n          x: 677.6692600005458,\n          y: -376.1925420306952,\n        },\n        style: {\n          width: 228,\n          height: 161,\n          backgroundColor: \"#fffef0\",\n        },\n      },\n      {\n        id: \"text-24\",\n        type: \"customText\",\n        data: {\n          label:\n            \"CUSTOMER NAME: \\n- Account #\\n- IVP External ID\\n- Billable Items\\n\\n... MARKDOWN or HTML Table of IVP Config ...\",\n        },\n        position: {\n          x: -183.64857635090289,\n          y: -61.19055599704859,\n        },\n        style: {\n          width: 311,\n          height: 251,\n          backgroundColor: \"#fffef0\",\n        },\n      },\n    ];\n\n    // Enhance datacenter nodes with SIP interface IPs\n    const enhancedBaseNodes = enhanceDataCentreNodes(baseNodes);\n\n    // Combine enhanced base nodes with generated customer nodes\n    const gen1CustomerNodes = generateGen1CustomerNodes();\n    const initialNodes = [...enhancedBaseNodes, ...gen1CustomerNodes];\n\n    console.log(\n      \"Total nodes:\",\n      initialNodes.length,\n      \"(Base:\",\n      baseNodes.length,\n      \"+ Gen1 Customers:\",\n      gen1CustomerNodes.length,\n      \")\",\n    );\n\n    /* DATA: Initial edges from dataTopoV1 export */\n    const baseEdges = [\n      {\n        id: \"reactflow__edge-19left-source-20left\",\n        source: \"19\",\n        target: \"20\",\n        sourceHandle: \"left-source\",\n        targetHandle: \"left\",\n        style: {\n          stroke: \"#ef4444\",\n          strokeDasharray: \"5,5\",\n        },\n        label: \"Dirty\",\n      },\n      {\n        id: \"reactflow__edge-21left-source-20left\",\n        source: \"21\",\n        target: \"20\",\n        sourceHandle: \"left-source\",\n        targetHandle: \"left\",\n        style: {\n          stroke: \"#ef4444\",\n          strokeDasharray: \"5,5\",\n        },\n        label: \"Dirty\",\n      },\n      {\n        id: \"reactflow__edge-20top-source-19bottom\",\n        source: \"20\",\n        target: \"19\",\n        sourceHandle: \"top-source\",\n        targetHandle: \"bottom\",\n        style: {\n          stroke: \"#10b981\",\n          strokeDasharray: \"5,5\",\n        },\n        label: \"Clean\",\n      },\n      {\n        id: \"reactflow__edge-20bottom-source-21top\",\n        source: \"20\",\n        target: \"21\",\n        sourceHandle: \"bottom-source\",\n        targetHandle: \"top\",\n        style: {\n          stroke: \"#10b981\",\n          strokeDasharray: \"5,5\",\n        },\n        label: \"Clean\",\n      },\n      {\n        id: \"reactflow__edge-2right-source-13left\",\n        source: \"2\",\n        target: \"13\",\n        sourceHandle: \"right-source\",\n        targetHandle: \"left\",\n        style: {\n          stroke: \"#10b981\",\n          strokeWidth: 1.5,\n        },\n        label: \"carrierNames\",\n      },\n      {\n        id: \"reactflow__edge-2right-source-14left\",\n        source: \"2\",\n        target: \"14\",\n        sourceHandle: \"right-source\",\n        targetHandle: \"left\",\n        style: {\n          stroke: \"#10b981\",\n          strokeWidth: 1.5,\n        },\n        label: \"carrierNames\",\n      },\n      {\n        id: \"reactflow__edge-group-18top-source-group-9bottom\",\n        source: \"group-18\",\n        target: \"group-9\",\n        sourceHandle: \"top-source\",\n        targetHandle: \"bottom\",\n        style: {\n          stroke: \"#3b82f6\",\n          strokeWidth: 2,\n          strokeDasharray: \"5,5\",\n        },\n        label: \"backBoneTrunks\",\n      },\n    ];\n\n    // Generate and combine all dynamic edges\n    const gen1CarriageEdges = generateGen1CarriageEdges();\n    const gen1CustomerEdges = generateGen1CustomerEdges();\n    const initialEdges = [\n      ...baseEdges,\n      ...gen1CarriageEdges,\n      ...gen1CustomerEdges,\n    ];\n\n    console.log(\n      \"Total edges:\",\n      initialEdges.length,\n      \"(Base:\",\n      baseEdges.length,\n      \"+ Gen1 Carriage edges:\",\n      gen1CarriageEdges.length,\n      \"+ Gen1 Customer edges:\",\n      gen1CustomerEdges.length,\n      \")\",\n    );\n\n    /* ====================================================================\n     * REACT FLOW COMPONENT\n     * ====================================================================\n     */\n\n    /* COMPONENT 5: Main Network Topology Component */\n    const NetworkTopology = () => {\n      // State for nodes and edges\n      const [nodes, setNodes] = React.useState(initialNodes);\n      const [edges, setEdges] = React.useState(initialEdges);\n\n      // Node types registry - must be memoized to prevent re-creation on each render\n      const nodeTypes = React.useMemo(\n        () => ({\n          custom: CustomNode,\n          customGroup: CustomGroupNode,\n          customText: CustomTextNode,\n        }),\n        [],\n      );\n\n      // Edge types registry - must be memoized to prevent re-creation on each render\n      const edgeTypes = React.useMemo(\n        () => ({\n          custom: CustomEdge,\n          carrierConnection: CarrierConnectionEdge,\n        }),\n        [],\n      );\n\n      // Optional: Listen for updates from Appsmith model\n      React.useEffect(() => {\n        // You can update nodes/edges based on appsmith.model data here\n        // Example:\n        // if (appsmith.model?.nodes) {\n        //   setNodes(appsmith.model.nodes);\n        // }\n        // if (appsmith.model?.edges) {\n        //   setEdges(appsmith.model.edges);\n        // }\n        console.log(\n          \"Network topology ready with\",\n          nodes.length,\n          \"nodes and\",\n          edges.length,\n          \"edges\",\n        );\n      }, []);\n\n      console.log(\n        \"Rendering ReactFlow with nodes:\",\n        nodes.length,\n        \"edges:\",\n        edges.length,\n      );\n      console.log(\"First edge:\", edges[0]);\n\n      return React.createElement(\n        \"div\",\n        { style: { width: \"100%\", height: \"100%\" } },\n        React.createElement(\n          ReactFlow,\n          {\n            nodes,\n            edges,\n            nodeTypes,\n            edgeTypes,\n            fitView: true,\n            fitViewOptions: {\n              padding: 0.2,\n              includeHiddenNodes: false,\n            },\n            minZoom: 0.1,\n            maxZoom: 2,\n            defaultViewport: { x: 0, y: 0, zoom: 0.8 },\n            attributionPosition: \"bottom-left\",\n            onInit: (instance) => {\n              console.log(\"ReactFlow initialized\");\n              console.log(\"Edges in store:\", instance.getEdges().length);\n            },\n          },\n          React.createElement(Controls, {\n            showZoom: true,\n            showFitView: true,\n            showInteractive: true,\n          }),\n          React.createElement(MiniMap, {\n            nodeColor: (node) => {\n              if (node.type === \"customGroup\") return \"rgba(66, 153, 225, 0.3)\";\n              if (node.type === \"customText\") return \"#fffef0\";\n              if (node.style?.backgroundColor)\n                return node.style.backgroundColor;\n              return \"#ffffff\";\n            },\n            maskColor: \"rgba(0, 0, 0, 0.1)\",\n            zoomable: true,\n            pannable: true,\n          }),\n          React.createElement(Background, {\n            variant: \"dots\",\n            gap: 16,\n            size: 1,\n            color: \"#e5e7eb\",\n          }),\n        ),\n      );\n    };\n\n    /* ====================================================================\n     * RENDER TO DOM\n     * ====================================================================\n     */\n\n    console.log(\"‚úì Custom node components created\");\n    console.log(\"‚úì Network topology data loaded\");\n\n    // Render the React Flow component\n    const container = document.getElementById(\"root\");\n    if (!container) {\n      throw new Error(\"Root container not found\");\n    }\n\n    const root = ReactDOMClient.createRoot(container);\n\n    // Check if ReactFlowProvider exists\n    if (ReactFlowProvider) {\n      console.log(\"Using ReactFlowProvider to wrap app\");\n      const App = () =>\n        React.createElement(\n          ReactFlowProvider,\n          null,\n          React.createElement(NetworkTopology),\n        );\n      root.render(React.createElement(App));\n    } else {\n      console.log(\"No ReactFlowProvider found, rendering directly\");\n      root.render(React.createElement(NetworkTopology));\n    }\n\n    console.log(\"‚úì DataTopoV1 Network Topology Rendered Successfully\");\n    console.log(\"üìä Nodes:\", initialNodes.length);\n    console.log(\"üîó Edges:\", initialEdges.length);\n  } catch (error) {\n    console.error(\"‚ùå Error initializing network topology:\", error);\n    const container = document.getElementById(\"root\");\n    if (container) {\n      container.innerHTML =\n        '<div class=\"topology-error\">' +\n        \"<h3>Error Loading Network Topology</h3>\" +\n        \"<p><strong>Error:</strong> \" +\n        error.message +\n        \"</p>\" +\n        \"<pre>\" +\n        error.stack +\n        \"</pre>\" +\n        \"</div>\";\n    }\n  }\n}\n\n/* ========================================================================\n * APPSMITH MODEL UPDATE HANDLER (Optional)\n * ========================================================================\n */\n\n// Listen for model updates from Appsmith\n// Uncomment and customize if you want to update the diagram based on external data\n\n/*\nappsmith.onModelChange(() => {\n  console.log('Model data updated:', appsmith.model);\n  // You can trigger re-renders or update the topology here\n  // For example, pass new nodes/edges from a database query\n});\n*/\n\n/* ========================================================================\n * UTILITY FUNCTIONS (Optional)\n * ========================================================================\n */\n\n// Helper function to format node data\nfunction formatNodeLabel(data) {\n  if (!data) return \"N/A\";\n  if (typeof data === \"string\") return data;\n  return JSON.stringify(data);\n}\n\n// Helper function to validate edge connections\nfunction isValidConnection(connection) {\n  return connection.source && connection.target;\n}\n\nconsole.log(\"‚úì DataTopoV1 widget script loaded\");\n"
  },
  "version": 1,
  "widgetId": "w0yrj9tm0d",
  "widgetName": "ReactFlow"
}